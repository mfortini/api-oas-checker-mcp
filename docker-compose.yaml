#
# This docker compose file allows to deploy the MCP server in a container
#   so it will execute code in a sandboxed environment.
#
# Run with:
#
# $ docker compose up -d mcp
#
# Then configure the MCP client to connect to http://localhost:3001/mcp
#
services:
  dev:
    image: node:22-alpine
    volumes:
    - .:/code
    working_dir: /code
    command:
    - sleep
    - infinity
  mcp:
    build: .
    image: api-oas-checker-mcp:latest
    container_name: api-oas-checker-mcp
    restart: unless-stopped
    ports:
      - "3001:3001"
    # Optional: mount usage logs to persist them
    volumes:
      - ./logs:/app/logs
    # Environment variables
    environment:
      - NODE_ENV=production
      - MCP_TRANSPORT=sse
      - PORT=3001
      - HOST=0.0.0.0